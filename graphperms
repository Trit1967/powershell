$requiredScopes = @(
    "DeviceManagementApps.Read.All",
    "DeviceManagementManagedDevices.Read.All",
    "Group.Read.All",
    "User.Read.All",
    "Directory.Read.All"
)

$currentScopes = (Get-MgContext).Scopes
Write-Host "`nüîç Checking Required Microsoft Graph Permissions:`n"

foreach ($scope in $requiredScopes) {
    if ($currentScopes -contains $scope) {
        Write-Host "‚úÖ $scope"
    } else {
        Write-Host "‚ùå $scope MISSING"
    }
}
